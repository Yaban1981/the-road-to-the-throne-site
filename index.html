<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>QHC â€” The Road to The Throne</title>
  <meta name="description" content="IntÃ©rÃªt tournois printemps 2026 â€” Boston, Montreal Meltdown, The Throne" />

  <!-- Canonical -->
  <link rel="canonical" href="https://yaban1981.github.io/the-road-to-the-throne-site/">

  <!-- Open Graph / Twitter -->
  <meta property="og:site_name" content="QuÃ©bec HC">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://yaban1981.github.io/the-road-to-the-throne-site/">
  <meta property="og:title" content="QHC â€” The Road to The Throne">
  <meta property="og:description" content="Tournois printemps 2026 â€¢ Boston â€¢ Montreal Meltdown â€¢ The Throne">
  <meta property="og:image" content="https://yaban1981.github.io/the-road-to-the-throne-site/images/og-image.jpg?v=1">
  <meta property="og:image:width" content="1200"><meta property="og:image:height" content="630">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="QHC â€” The Road to The Throne">
  <meta name="twitter:description" content="IntÃ©rÃªt tournois printemps 2026">
  <meta name="twitter:image" content="https://yaban1981.github.io/the-road-to-the-throne-site/images/og-image.jpg?v=1">

  <!-- Favicons -->
  <link rel="icon" href="https://yaban1981.github.io/the-road-to-the-throne-site/logos/qhc.png" sizes="32x32">
  <link rel="apple-touch-icon" href="https://yaban1981.github.io/the-road-to-the-throne-site/logos/qhc.png">
  <meta name="theme-color" content="#0a1020">
  <meta name="format-detection" content="telephone=no">

  <style>
    :root{
      --bg:#0f172a; --panel:#0e152a; --panel2:#0a1020;
      --text:#e7ecf3; --muted:#a7b3c7;
      --accent:#d4af37; --accent2:#3b82f6;
      --success:#d4af37; --ring:rgba(59,130,246,.3);
      --radius:16px;
    }
    *{box-sizing:border-box; -webkit-tap-highlight-color:transparent}
    html,body{scroll-behavior:smooth; -webkit-text-size-adjust:100%}
    body{
      margin:0; font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
      background: radial-gradient(800px 400px at 10% -10%, #0b2451 0%, transparent 60%), linear-gradient(180deg, #091024, #0a0f1a);
      color:var(--text); line-height:1.5;
    }

    /* Hero */
    .hero{
      padding:28px 16px 18px;
      background: radial-gradient(700px 320px at 15% -10%, rgba(59,130,246,.18), transparent 60%),
                  linear-gradient(180deg, #0a1020, #0b1222 60%, #0a0f1a);
      border-bottom:1px solid rgba(255,255,255,.06);
      position:relative; overflow:hidden;
    }
    .hero::before{content:""; position:absolute; top:0; left:0; right:0; height:1px;
      background:linear-gradient(90deg, transparent, var(--accent2), transparent); animation: shimmer 3s ease-in-out infinite;}
    @keyframes shimmer {0%,100%{opacity:.3} 50%{opacity:1}}
    .hero-wrap{max-width:980px; margin:0 auto; display:flex; flex-direction:column; align-items:center; gap:18px}
    .hero-logo{width:120px; height:120px; border-radius:22px; display:grid; place-items:center; overflow:hidden;
      background: radial-gradient(closest-side, rgba(59,130,246,.30), transparent 68%); box-shadow: 0 16px 44px rgba(3,102,214,.35)}
    .hero-logo img{width:100%; height:100%; object-fit:cover; border-radius:20px}
    .hero-text{text-align:center}
    .hero h1{margin:0; font-size:2rem; letter-spacing:.3px; line-height:1.15}
    .hero-sub{margin:6px 0 4px; color:#dfe7ff; font-size:1.1rem; opacity:.95}
    .hero-meta{margin:0; color:#9fb7ff; font-size:.95rem; opacity:.9}

    /* Tournaments */
    .tournaments-section{max-width:1040px; margin:0 auto 20px; padding:0 16px}
    .tournaments-section h2{text-align:center; margin:0 0 20px; font-size:1.4rem; color:#eaf2ff}
    .tournaments{display:grid; grid-template-columns:1fr; gap:16px}
    .tcard{position:relative; background:#0b1020; border:1px solid rgba(255,255,255,.08); border-radius:20px; padding:20px; min-height:180px; overflow:hidden;
      display:grid; place-items:center; box-shadow: inset 0 0 0 1px rgba(255,255,255,.02), 0 8px 32px rgba(0,0,0,.3); transition:.3s transform,.3s box-shadow,.3s border-color}
    .tcard:hover{transform:translateY(-2px); box-shadow: inset 0 0 0 1px rgba(255,255,255,.02), 0 12px 40px rgba(0,0,0,.4); border-color: rgba(59,130,246,.3)}
    .tcard::after{content:""; position:absolute; inset:0; background: radial-gradient(60% 55% at 50% 40%, transparent 55%, rgba(0,0,0,.18) 100%)}
    .tcard .logo{width:100%; height:100%; display:grid; place-items:center; z-index:2}
    .tcard .logo img{width:85%; max-width:280px; max-height:120px; height:auto; object-fit:contain; filter:drop-shadow(0 8px 20px rgba(0,0,0,.45)); transform:translateY(2px); transition:.3s transform}
    .tcard:hover .logo img{transform:translateY(0) scale(1.05)}
    .t-info-pill{position:absolute; bottom:12px; height:32px; display:flex; align-items:center; padding:6px 12px; border-radius:10px; font-variant-numeric:tabular-nums; backdrop-filter:blur(6px); font-size:.85rem; z-index:3}
    .t-date {left:12px;  font-weight:700; color:#dfe7ff; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.10)}
    .t-badge{right:12px; font-weight:800; color:#fff; background:linear-gradient(135deg,#1f7cff,#60a5fa); box-shadow:0 6px 16px rgba(31,124,255,.35)}

    /* Layout */
    main{padding:12px 16px 40px; max-width:1040px; margin:0 auto}
    .card, form{background:linear-gradient(180deg,var(--panel2),var(--panel)); border-radius:var(--radius); border:1px solid rgba(255,255,255,.06); box-shadow:0 8px 32px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.04); padding:20px; margin:12px 0}
    fieldset{border:2px solid rgba(212,175,94,.35); padding:18px; border-radius:14px; margin:16px 0 0; position:relative; transition:.3s}
    fieldset.completed::after{content:"âœ“"; position:absolute; top:-12px; right:15px; width:24px; height:24px; border-radius:50%; background:var(--success); color:#0a0f1a; display:flex; align-items:center; justify-content:center; font-weight:800; box-shadow:0 2px 8px rgba(212,175,94,.4)}
    legend{padding:0 8px; color:var(--accent2); font-weight:700; font-size:1.1rem; margin-bottom:8px}
    .grid{display:flex; flex-direction:column; gap:16px}
    .col-12,.col-6,.col-4,.col-3{width:100%}
    label{display:block; font-size:1rem; margin-bottom:8px; font-weight:500}
    .muted{color:var(--muted); font-size:.95rem}
    .row{display:flex; gap:12px; align-items:center; flex-wrap:wrap}

    /* Inputs */
    .input-container{position:relative}
    .input-container.valid::after{content:"âœ“"; position:absolute; right:14px; top:50%; transform:translateY(-50%); color:var(--success); font-weight:800; font-size:16px}
    input[type="text"], input[type="email"], input[type="tel"], input[type="range"], select, textarea{
      width:100%; padding:16px; border-radius:12px; border:1.5px solid rgba(255,255,255,.16);
      background:#0b1020; color:var(--text); outline:none; font-size:16px;
    }
    input:focus, select:focus, textarea:focus{border-color:var(--accent2); box-shadow:0 0 0 3px var(--ring); background:#0b142a}
    input.valid, select.valid, textarea.valid{border-color:var(--accent); background:rgba(212,175,94,.07)}
    select{background-image:url("data:image/svg+xml,%3Csvg width='20' height='20' viewBox='0 0 24 24' fill='%23d4af37' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7 10l5 5 5-5'/%3E%3C/svg%3E"); background-repeat:no-repeat; background-position:right 12px center; padding-right:44px}
    textarea{min-height:120px; resize:vertical}

    /* Choice blocks */
    .check-row{display:flex; flex-direction:column; gap:10px}
    .check{position:relative; display:flex; gap:12px; align-items:center; background:#0b1020; padding:14px; border:1px solid rgba(255,255,255,.08); border-radius:12px; min-height:54px; transition:.2s}
    .check.valid{border-color:var(--accent); background:rgba(212,175,94,.07)}
    .check.valid::after{content:"âœ“"; position:absolute; right:14px; color:var(--accent); font-weight:800; font-size:16px}
    .check input[type="radio"], .check input[type="checkbox"]{transform:scale(1.1); margin:0}

    /* Submit */
    .submit{margin-top:24px; display:flex; gap:12px; flex-direction:column}
    button{appearance:none; border:0; background:linear-gradient(135deg, var(--accent), var(--accent2)); color:#fff; padding:18px 24px; border-radius:14px; font-weight:700; font-size:1.1rem; min-height:56px; cursor:pointer; box-shadow:0 8px 24px rgba(59,130,246,.28)}
    button:hover{transform:translateY(-2px)}
    .outline{background:transparent; border:1px solid rgba(255,255,255,.12); color:#fff}
    .confidence-display{display:flex; justify-content:space-between; align-items:center; margin-top:10px}
    .confidence-value{font-weight:700; font-size:1.1rem; color:#accent2; background:rgba(59,130,246,.1); padding:4px 12px; border-radius:20px; border:1px solid rgba(59,130,246,.3)}

    /* Slider + hint */
    .slider-container{position:relative; margin:30px 0 20px; background: rgba(11,16,32,.5); border-radius:12px; padding:15px; border:2px solid rgba(212,175,94,.5)}
    input[type="range"]{height:44px; padding:0; background:transparent; position:relative; z-index:2; width:calc(100% - 10px); margin:0 5px}
    input[type="range"]::-webkit-slider-thumb{-webkit-appearance:none; height:28px; width:28px; border-radius:50%; background:var(--accent2); border:2px solid #fff; box-shadow:0 4px 12px rgba(59,130,246,.4)}
    input[type="range"]::-webkit-slider-track{height:8px; background:rgba(255,255,255,.12); border-radius:4px}
    .hand-hint{ position:absolute; top:-35px; left:0; z-index:5; opacity:.95; pointer-events:none; animation: slideHand 3s ease-in-out infinite}
    .hand-hint svg{ width:32px; height:32px; filter: drop-shadow(0 2px 4px rgba(0,0,0,.3)); color: var(--accent)}
    @keyframes slideHand{
      0%{transform:translateX(0); opacity:0} 10%{opacity:.95} 30%{transform:translateX(calc(100% - 50px)) scale(1.1)}
      50%{transform:translateX(calc(100% - 50px))} 70%{transform:translateX(0) scale(1.1)} 90%{opacity:.95} 100%{transform:translateX(0); opacity:0}
    }

    /* Fallback Modal */
    .fallback-modal {
      display: none;
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(10, 16, 32, 0.95);
      z-index: 10000;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }
    .fallback-content {
      background: var(--panel);
      border-radius: var(--radius);
      padding: 24px;
      max-width: 500px;
      width: 100%;
      border: 1px solid rgba(212, 175, 94, 0.3);
      box-shadow: 0 16px 48px rgba(0,0,0,0.5);
    }
    .fallback-content h3 {
      color: var(--accent);
      margin-top: 0;
    }
    .fallback-actions {
      display: flex;
      gap: 12px;
      margin-top: 20px;
      flex-wrap: wrap;
    }
    .fallback-actions button {
      flex: 1;
      min-width: 120px;
    }

    /* Desktop */
    @media (min-width:768px){
      .hero{padding:36px 24px 22px}
      .hero-wrap{flex-direction:row; justify-content:center; gap:24px}
      .hero-logo{width:160px; height:160px}
      .hero h1{font-size:2.4rem}
      .tournaments{grid-template-columns:repeat(3,1fr); gap:20px}
      .tcard{min-height:200px}
      .check{flex:1; min-width:168px}
      .submit{flex-direction:row}
      .lang-split{display:flex; gap:12px}
      .grid{display:grid; gap:16px; grid-template-columns:repeat(12,1fr)}
      .col-12{grid-column:span 12} .col-6{grid-column:span 6} .col-4{grid-column:span 4} .col-3{grid-column:span 3}
    }
  </style>
</head>
<body>
  <noscript>
    <div style="background:#3b82f6;color:#fff;padding:10px;text-align:center">
      JavaScript requis pour l'envoi et la redirection. / JavaScript required for submission & redirect.
    </div>
  </noscript>

  <!-- Modal de fallback -->
  <div class="fallback-modal" id="fallbackModal">
    <div class="fallback-content">
      <h3>ðŸ“§ Soumission alternative / Alternative Submission</h3>
      <p>La soumission automatique a Ã©chouÃ©. Vous pouvez :</p>
      <p><em>Automatic submission failed. You can:</em></p>
      <div class="fallback-actions">
        <button onclick="sendFallbackEmail()" style="background:linear-gradient(135deg, var(--accent), #e74c3c)">
          ðŸ“¤ Envoyer par email / Send by email
        </button>
        <button onclick="copyFallbackToClipboard()" class="outline">
          ðŸ“‹ Copier / Copy
        </button>
        <button onclick="closeFallbackModal()" class="outline">
          Annuler / Cancel
        </button>
      </div>
    </div>
  </div>

  <header class="hero">
    <div class="hero-wrap">
      <div class="hero-logo"><img src="https://yaban1981.github.io/the-road-to-the-throne-site/logos/qhc.png" alt="Logo QuÃ©bec HC"></div>
      <div class="hero-text">
        <h1>The Road to The Throne</h1>
        <p class="hero-sub">IntÃ©rÃªt tournois printemps 2026</p>
        <p class="hero-meta">Confiance requise â‰¥ 80% â€¢ Confidence required â‰¥ 80%</p>
      </div>
    </div>
  </header>

  <!-- Tournois -->
  <div class="tournaments-section">
    <h2>Nos Tournois 2026 / Our 2026 Tournaments</h2>
    <div class="tournaments">
      <div class="tcard">
        <a class="logo" href="https://200x85.com/event/ccm-blue-chip-invite/" target="_blank" rel="noopener">
          <img src="https://yaban1981.github.io/the-road-to-the-throne-site/logos/bluechip.png" alt="CCM Blue Chip Invite logo" loading="lazy">
        </a>
        <div class="t-info-pill t-date">15â€“17.05.2026</div>
        <div class="t-info-pill t-badge" id="cd-boston">J-â€”</div>
      </div>
      <div class="tcard">
        <a class="logo" href="https://200x85.com/tournaments/montreal-meltdown/" target="_blank" rel="noopener">
          <img src="https://yaban1981.github.io/the-road-to-the-throne-site/logos/meltdown.png" alt="Montreal Meltdown logo" loading="lazy">
        </a>
        <div class="t-info-pill t-date">05â€“07.06.2026</div>
        <div class="t-info-pill t-badge" id="cd-meltdown">J-â€”</div>
      </div>
      <div class="tcard">
        <a class="logo" href="https://phdbestofbest.com/the-throne/" target="_blank" rel="noopener">
          <img src="https://yaban1981.github.io/the-road-to-the-throne-site/logos/throne.png" alt="The Throne Tournament logo" loading="lazy">
        </a>
        <div class="t-info-pill t-date">24â€“26.07.2026</div>
        <div class="t-info-pill t-badge" id="cd-throne">J-â€”</div>
      </div>
    </div>
  </div>

  <main>
    <div class="lang-split">
      <div class="card">
        <h3>FR â€” Important</h3>
        <p>Ce formulaire sert Ã  former les <strong>alignements par tournoi</strong>.</p>
        <p><strong>RÃ¨gle The Throne</strong> : participation Ã  au moins <strong>un</strong> autre tournoi (Boston ou Meltdown).</p>
        <p><strong>Places limitÃ©es</strong> : notre staff formera les <strong>meilleurs trios/duos</strong>.</p>
        <p class="small">Frais d'assurances et dÃ©charges Ã  prÃ©voir.</p>
      </div>
      <div class="card">
        <h3>EN â€” Key info</h3>
        <p>This form builds <strong>tournament lineups</strong>.</p>
        <p><strong>Throne rule</strong>: must play in at least <strong>one</strong> other tournament.</p>
        <p><strong>Limited spots</strong>: staff will build the <strong>best lines/pairs</strong>.</p>
        <p class="small">Insurance fees & waivers required.</p>
      </div>
    </div>

    <!-- ====== HIDDEN IFRAME (pour soumission native sans quitter la page) ====== -->
    <iframe name="fs_iframe" id="fs_iframe" style="display:none"></iframe>

    <!-- ====== FORMULAIRE (soumission -> iframe) ====== -->
    <form
      action="https://formsubmit.co/yannick.banaszak%40outlook.com"
      method="POST"
      target="fs_iframe"
      id="qhc-form"
      novalidate>

      <!-- paramÃ¨tres FormSubmit -->
      <input type="hidden" name="_captcha" value="false">
      <input type="hidden" name="_template" value="table">
      <input type="hidden" name="_subject" value="QHC â€” The Road to The Throne">
      <input type="hidden" name="_bcc" value="David.belanger.6@ulaval.ca">
      <!-- ABSOLU (secours) -->
      <input type="hidden" name="_next" value="https://yaban1981.github.io/the-road-to-the-throne-site/thanks.html">
      <!-- Reply-To -->
      <input type="hidden" id="replyto" name="_replyto" value="">
      <input type="hidden" id="emailAlias" name="email" value="">
      <input type="hidden" name="form_version" value="rttt_v1_iframe_ios_safe">

      <!-- 1 -->
      <fieldset id="fieldset-player">
        <legend>1) Info joueur / Player Info</legend>
        <div class="grid">
          <div class="col-6 input-container">
            <label for="player_name">Nom complet / Full name <span class="req">*</span></label>
            <input id="player_name" name="player_name" type="text" required autocomplete="name">
          </div>
          <div class="col-3 input-container">
            <label for="birth_year">AnnÃ©e / Year <span class="req">*</span></label>
            <select id="birth_year" name="birth_year" required>
              <option value="">â€” Choisir / Select â€”</option>
              <option>2012</option><option>2013</option><option>2014</option><option>2015</option>
            </select>
          </div>
          <div class="col-3 input-container">
            <label for="city">Ville / City <span class="req">*</span></label>
            <input id="city" name="city" type="text" required>
          </div>
          <div class="col-6 input-container">
            <label for="current_team">Ã‰quipe actuelle / Current team</label>
            <input id="current_team" name="current_team" type="text">
          </div>
          <div class="col-6 input-container">
            <label for="parent_email">Courriel parent / Parent email <span class="req">*</span></label>
            <input id="parent_email" name="parent_email" type="email" required autocomplete="email" inputmode="email">
          </div>
          <div class="col-6 input-container">
            <label for="parent_phone">TÃ©lÃ©phone parent / Parent phone</label>
            <input id="parent_phone" name="parent_phone" type="tel" autocomplete="tel">
          </div>
        </div>
      </fieldset>

      <!-- 2 -->
      <fieldset id="fieldset-position">
        <legend>2) Poste & style / Position & Style</legend>
        <div class="grid">
          <div class="col-6">
            <label>Position principale / Primary position <span class="req">*</span></label>
            <div class="check-row" role="radiogroup" aria-label="Primary position">
              <label class="check"><input type="radio" name="primary_position" value="Forward" required> Avant / Forward</label>
              <label class="check"><input type="radio" name="primary_position" value="Defence" required> DÃ©fense / Defence</label>
              <label class="check"><input type="radio" name="primary_position" value="Center" required> Centre / Center</label>
              <label class="check"><input type="radio" name="primary_position" value="Goaler" required> Gardien / Goaler</label>
            </div>
          </div>
          <div class="col-6">
            <label>Position secondaire / Secondary position</label>
            <div class="check-row" role="radiogroup" aria-label="Secondary position">
              <label class="check"><input type="radio" name="secondary_position" value="Forward"> Avant / Forward</label>
              <label class="check"><input type="radio" name="secondary_position" value="Defence"> DÃ©fense / Defence</label>
              <label class="check"><input type="radio" name="secondary_position" value="Center"> Centre / Center</label>
              <label class="check"><input type="radio" name="secondary_position" value="Goaler"> Gardien / Goaler</label>
              <label class="check"><input type="radio" name="secondary_position" value="None" checked> Aucune / None</label>
            </div>
          </div>

          <div class="col-12">
            <label>CÃ´tÃ© / Side <span class="req">*</span></label>
            <div class="check-row" aria-label="Side (L/R)">
              <label class="check"><input type="checkbox" name="side_right" value="Yes"> Droite / Right</label>
              <label class="check"><input type="checkbox" name="side_left"  value="Yes"> Gauche / Left</label>
            </div>
          </div>

          <div class="col-12 input-container">
            <label for="player_style">Style de joueur / Player style</label>
            <input id="player_style" name="player_style" type="text" placeholder="ex: rapide/fast, offensif/offensive, physique/physicalâ€¦">
          </div>
          <div class="col-12 input-container">
            <label for="video_links">Liens vidÃ©o / Video links</label>
            <textarea id="video_links" name="video_links" placeholder="Liens YouTube/Vimeo, timestamps, notes (multiâ€‘lignes)â€¦"></textarea>
          </div>
        </div>
      </fieldset>

      <!-- 3 -->
      <fieldset id="fieldset-jersey">
        <legend>3) Chandail / Jersey</legend>
        <div class="grid">
          <div class="col-4 input-container">
            <label for="jersey_number_1">Choix #1</label>
            <input id="jersey_number_1" name="jersey_number_1" type="text" inputmode="numeric" pattern="[0-9]{1,2}" placeholder="ex: 27">
          </div>
          <div class="col-4 input-container">
            <label for="jersey_number_2">Choix #2</label>
            <input id="jersey_number_2" name="jersey_number_2" type="text" inputmode="numeric" pattern="[0-9]{1,2}" placeholder="ex: 88">
          </div>
          <div class="col-4 input-container">
            <label for="jersey_number_3">Choix #3</label>
            <input id="jersey_number_3" name="jersey_number_3" type="text" inputmode="numeric" pattern="[0-9]{1,2}" placeholder="ex: 13">
          </div>
          <div class="col-6">
            <label>Type</label>
            <div class="check-row" role="radiogroup" aria-label="Jersey type">
              <label class="check"><input type="radio" name="jersey_type" value="Loaned" checked> PrÃªtÃ© / Loaned</label>
              <label class="check"><input type="radio" name="jersey_type" value="Customized"> PersonnalisÃ© / Custom</label>
            </div>
            <div class="muted small" style="margin-top:8px">
              <strong>Note / Note:</strong>
              des frais <u>supplÃ©mentaires</u> seront demandÃ©s pour un chandail <strong>personnalisÃ©</strong> (nom & numÃ©ro). /
              <em>Additional fee applies</em> for a <strong>custom jersey</strong> (name & number).
            </div>
          </div>
          <div class="col-6 input-container">
            <label for="jersey_size">Taille / Size <span class="req">*</span></label>
            <select id="jersey_size" name="jersey_size" required>
              <option value="">â€” Choisir / Select â€”</option>
              <option>YS</option><option>YM</option><option>YL</option>
              <option>AS</option><option>AM</option><option>AL</option><option>AXL</option>
            </select>
          </div>
        </div>
      </fieldset>

      <!-- 4 -->
      <fieldset id="fieldset-availability">
        <legend>4) DisponibilitÃ©s / Availability</legend>
        <div class="grid">
          <div class="col-12 muted">Aucun paiement maintenant / No payment now.</div>

          <div class="col-12">
            <label class="muted">Boston, MA â€” <span class="price">â‰ˆ 150 $ CAD</span> â€¢ <span class="date">15â€“17.05.2026</span></label>
            <div class="check-row" role="radiogroup" aria-label="Boston">
              <label class="check"><input type="radio" name="boston_showdown" value="Yes"> Oui / Yes</label>
              <label class="check"><input type="radio" name="boston_showdown" value="No"> Non / No</label>
              <label class="check"><input type="radio" name="boston_showdown" value="TBD" checked> Ã€ confirmer / TBD</label>
            </div>
          </div>

          <div class="col-12">
            <label class="muted">MontrÃ©al, QC â€” <span class="price">â‰ˆ 150 $ CAD</span> â€¢ <span class="date">05â€“07.06.2026</span></label>
            <div class="check-row" role="radiogroup" aria-label="Meltdown">
              <label class="check"><input type="radio" name="montreal_meltdown" value="Yes"> Oui / Yes</label>
              <label class="check"><input type="radio" name="montreal_meltdown" value="No"> Non / No</label>
              <label class="check"><input type="radio" name="montreal_meltdown" value="TBD" checked> Ã€ confirmer / TBD</label>
            </div>
          </div>

          <div class="col-12">
            <label class="muted">Toronto, ON â€” <span class="price">â‰ˆ 250 $ CAD</span> â€¢ <span class="date">24â€“26.07.2026</span></label>
            <div class="check-row" role="radiogroup" aria-label="The Throne">
              <label class="check"><input type="radio" name="the_throne" value="Yes"> Oui / Yes</label>
              <label class="check"><input type="radio" name="the_throne" value="No"> Non / No</label>
              <label class="check"><input type="radio" name="the_throne" value="TBD" checked> Ã€ confirmer / TBD</label>
            </div>
          </div>

          <div class="col-12">
            <label for="confidence_pct">Confiance / Confidence (â‰¥ 80%)</label>
            <div class="slider-container" id="confidenceSlider">
              <input type="range" id="confidence_pct" name="confidence_pct" min="80" max="100" value="80"
                     aria-label="Confidence percent" aria-valuemin="80" aria-valuemax="100" aria-valuenow="80"
                     oninput="updateConfidenceValue(this.value)">
              <div class="hand-hint" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                  <path d="M10.5 9.5V7.5c0-1.1-.9-2-2-2s-2 .9-2 2v2m8 0V7.5c0-1.1-.9-2-2-2s-2 .9-2 2v2m8 0V7.5c0-1.1-.9-2-2-2s-2 .9-2 2v2M6.5 9.5v1c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2v-1m-8 3v2a2 2 0 0 0 4 0v-2"/>
                </svg>
              </div>
            </div>
            <div class="confidence-display">
              <span class="muted">Valeur / Value:</span>
              <span class="confidence-value" id="confVal">80%</span>
            </div>
          </div>
        </div>
      </fieldset>

      <!-- 5 -->
      <fieldset id="fieldset-confirmations">
        <legend>5) Confirmations</legend>
        <div class="grid">
          <div class="col-12 row small">
            <label class="check"><input type="checkbox" name="ack_throne_rule" required> Je comprends la rÃ¨gle The Throne / I understand the Throne rule <span class="req">*</span></label>
          </div>
          <div class="col-12 row small">
            <label class="check"><input type="checkbox" name="ack_limited_spots" required> Places limitÃ©es / Limited spots <span class="req">*</span></label>
          </div>
          <div class="col-12 row small">
            <label class="check"><input type="checkbox" name="consent_contact" required> J'accepte d'Ãªtre contactÃ© / I agree to be contacted <span class="req">*</span></label>
          </div>
        </div>
      </fieldset>

      <div class="submit">
        <button type="reset" class="outline">Effacer / Clear</button>
        <button type="submit" id="submitBtn">Soumettre / Submit</button>
      </div>
    </form>
  </main>

  <footer><div>Â© QuÃ©bec HC â€” Spring 2026</div></footer>

  <script>
    // Countdowns (compat)
    (function(){
      function mk(y,m,d){ return new Date(y,m-1,d,0,0,0,0); }
      var targets=[{id:'cd-boston',date:mk(2026,5,15)},{id:'cd-meltdown',date:mk(2026,6,5)},{id:'cd-throne',date:mk(2026,7,24)}];
      function update(){
        var now=new Date(); var today=new Date(now.getFullYear(),now.getMonth(),now.getDate());
        for(var i=0;i<targets.length;i++){
          var t=targets[i]; var el=document.getElementById(t.id); if(!el) continue;
          var days=Math.ceil((t.date-today)/86400000);
          el.textContent=(days>0)?('J-'+days):(days===0?'Jour J':'TerminÃ©');
        }
      }
      update(); setInterval(update, 3600000);
    })();

    function updateConfidenceValue(val){
      document.getElementById('confVal').textContent=val+'%';
      document.getElementById('confidence_pct').setAttribute('aria-valuenow', val);
    }

    // Fonctions pour le fallback email
    function showFallbackModal() {
      document.getElementById('fallbackModal').style.display = 'flex';
    }

    function closeFallbackModal() {
      document.getElementById('fallbackModal').style.display = 'none';
    }

    function collectFormData() {
      var form = document.getElementById('qhc-form');
      var formData = new FormData(form);
      var data = {};
      
      for (var pair of formData.entries()) {
        data[pair[0]] = pair[1];
      }
      return data;
    }

    function formatEmailContent(formData) {
      var content = "QHC â€” The Road to The Throne - Formulaire soumis\n\n";
      content += "=================================\n\n";
      
      // Section 1: Info joueur
      content += "1) INFO JOUEUR / PLAYER INFO\n";
      content += "Nom complet: " + (formData.player_name || '') + "\n";
      content += "AnnÃ©e de naissance: " + (formData.birth_year || '') + "\n";
      content += "Ville: " + (formData.city || '') + "\n";
      content += "Ã‰quipe actuelle: " + (formData.current_team || '') + "\n";
      content += "Courriel parent: " + (formData.parent_email || '') + "\n";
      content += "TÃ©lÃ©phone parent: " + (formData.parent_phone || '') + "\n\n";
      
      // Section 2: Position
      content += "2) POSTE & STYLE / POSITION & STYLE\n";
      content += "Position principale: " + (formData.primary_position || '') + "\n";
      content += "Position secondaire: " + (formData.secondary_position || '') + "\n";
      content += "CÃ´tÃ© droit: " + (formData.side_right || 'Non') + "\n";
      content += "CÃ´tÃ© gauche: " + (formData.side_left || 'Non') + "\n";
      content += "Style de joueur: " + (formData.player_style || '') + "\n";
      content += "Liens vidÃ©o: " + (formData.video_links || '') + "\n\n";
      
      // Section 3: Chandail
      content += "3) CHANDAIL / JERSEY\n";
      content += "NumÃ©ro choix 1: " + (formData.jersey_number_1 || '') + "\n";
      content += "NumÃ©ro choix 2: " + (formData.jersey_number_2 || '') + "\n";
      content += "NumÃ©ro choix 3: " + (formData.jersey_number_3 || '') + "\n";
      content += "Type: " + (formData.jersey_type || '') + "\n";
      content += "Taille: " + (formData.jersey_size || '') + "\n\n";
      
      // Section 4: DisponibilitÃ©s
      content += "4) DISPONIBILITÃ‰S / AVAILABILITY\n";
      content += "Boston: " + (formData.boston_showdown || '') + "\n";
      content += "MontrÃ©al: " + (formData.montreal_meltdown || '') + "\n";
      content += "The Throne: " + (formData.the_throne || '') + "\n";
      content += "Confiance: " + (formData.confidence_pct || '') + "%\n\n";
      
      // Section 5: Confirmations
      content += "5) CONFIRMATIONS\n";
      content += "RÃ¨gle The Throne: " + (formData.ack_throne_rule ? 'Oui' : 'Non') + "\n";
      content += "Places limitÃ©es: " + (formData.ack_limited_spots ? 'Oui' : 'Non') + "\n";
      content += "Contact: " + (formData.consent_contact ? 'Oui' : 'Non') + "\n\n";
      
      content += "=================================\n";
      content += "Soumis le: " + new Date().toLocaleString('fr-CA') + "\n";
      
      return content;
    }

    function sendFallbackEmail() {
      var formData = collectFormData();
      var emailContent = formatEmailContent(formData);
      var subject = "QHC â€” The Road to The Throne - Formulaire";
      var email = "yannick.banaszak@outlook.com";
      
      var mailtoLink = "mailto:" + email + 
                       "?subject=" + encodeURIComponent(subject) + 
                       "&body=" + encodeURIComponent(emailContent);
      
      window.location.href = mailtoLink;
      closeFallbackModal();
    }

    function copyFallbackToClipboard() {
      var formData = collectFormData();
      var emailContent = formatEmailContent(formData);
      
      navigator.clipboard.writeText(emailContent).then(function() {
        alert("Contenu copiÃ©! Collez-le dans un email. / Content copied! Paste in email.");
        closeFallbackModal();
      }).catch(function(err) {
        // Fallback pour les navigateurs plus anciens
        var textArea = document.createElement("textarea");
        textArea.value = emailContent;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        alert("Contenu copiÃ©! Collez-le dans un email. / Content copied! Paste in email.");
        closeFallbackModal();
      });
    }

    // Visuel + rÃ¨gles + redirection via iframe
    (function(){
      var form=document.getElementById('qhc-form');
      var iframe=document.getElementById('fs_iframe');
      var btn=document.getElementById('submitBtn');
      var submitted=false;
      var fallbackTriggered = false;

      // Mark .valid on inputs
      (function setupVisualValidation(){
        var typed=form.querySelectorAll('input[type="text"], input[type="email"], input[type="tel"], textarea, select');
        for(var i=0;i<typed.length;i++){
          typed[i].addEventListener('input', function(){
            var el=this, wrap=el.closest?el.closest('.input-container'):null;
            if(wrap){
              var filled=(el.tagName==='SELECT')?(el.value!=='') :(el.value.trim()!=='');
              wrap.classList.toggle('valid', filled);
              el.classList.toggle('valid', filled);
            }
            var fs=el.closest?el.closest('fieldset'):null; markFieldset(fs);
          });
        }
        var radios=form.querySelectorAll('input[type="radio"]');
        for(i=0;i<radios.length;i++){
          radios[i].addEventListener('change', function(){
            var group=form.querySelectorAll('input[name="'+this.name+'"]');
            for(var j=0;j<group.length;j++){
              var lbl=group[j].closest?group[j].closest('.check'):null;
              if(lbl) lbl.classList.remove('valid');
            }
            var lbl2=this.closest?this.closest('.check'):null; if(lbl2) lbl2.classList.add('valid');
            var fs=this.closest?this.closest('fieldset'):null; markFieldset(fs);
          });
        }
        var checks=form.querySelectorAll('input[type="checkbox"]');
        for(i=0;i<checks.length;i++){
          checks[i].addEventListener('change', function(){
            var lbl=this.closest?this.closest('.check'):null;
            if(lbl) lbl.classList.toggle('valid', this.checked);
            var fs=this.closest?this.closest('fieldset'):null; markFieldset(fs);
          });
        }
        var all=form.querySelectorAll('input,select,textarea');
        for(i=0;i<all.length;i++){
          var el=all[i]; if(el.type==='range') continue;
          var evt=(el.type==='radio'||el.type==='checkbox')?'change':'input';
          el.dispatchEvent(new Event(evt));
        }
        function markFieldset(fs){
          if(!fs) return; var ok=false;
          switch(fs.id){
            case 'fieldset-player': {
              var need=['player_name','birth_year','city','parent_email'];
              ok=need.every(function(id){
                var el=document.getElementById(id);
                return el && (el.tagName==='SELECT'? (el.value!=='') : (el.value.trim()!=='')) && (el.id!=='parent_email' || el.checkValidity());
              }); break;
            }
            case 'fieldset-position': {
              var primary=!!fs.querySelector('input[name="primary_position"]:checked');
              var sideOK=fs.querySelector('[name="side_right"]').checked || fs.querySelector('[name="side_left"]').checked;
              ok=primary && sideOK; break;
            }
            case 'fieldset-jersey': {
              var typeOK=!!fs.querySelector('input[name="jersey_type"]:checked');
              var sizeOK=(document.getElementById('jersey_size').value!=='');
              ok=typeOK && sizeOK; break;
            }
            case 'fieldset-availability': {
              var b=!!fs.querySelector('input[name="boston_showdown"]:checked');
              var m=!!fs.querySelector('input[name="montreal_meltdown"]:checked');
              var t=!!fs.querySelector('input[name="the_throne"]:checked');
              var conf=parseInt(document.getElementById('confidence_pct').value,10) >= 80;
              ok=b && m && t && conf; break;
            }
            case 'fieldset-confirmations': {
              var c1=fs.querySelector('[name="ack_throne_rule"]').checked;
              var c2=fs.querySelector('[name="ack_limited_spots"]').checked;
              var c3=fs.querySelector('[name="consent_contact"]').checked;
              ok=c1 && c2 && c3; break;
            }
          }
          fs.classList.toggle('completed', ok);
        }
      })();

      // Sync _replyto / email
      var emailField=document.getElementById('parent_email');
      var replyto=document.getElementById('replyto');
      var emailAlias=document.getElementById('emailAlias');
      function syncEmail(){ var v=(emailField.value||'').trim(); replyto.value=v; emailAlias.value=v; }
      emailField.addEventListener('input', syncEmail); syncEmail();

      // Redirection quand l'iframe a fini de charger (aprÃ¨s le POST)
      iframe.addEventListener('load', function(){
        if(submitted && !fallbackTriggered){
          window.location.href='https://yaban1981.github.io/the-road-to-the-throne-site/thanks.html';
        }
      });

      // Soumission (native -> iframe)
      form.addEventListener('submit', function(e){
        // HTML5 required
        if(!form.checkValidity()){
          e.preventDefault();
          var firstInvalid=form.querySelector(':invalid');
          if(firstInvalid){ firstInvalid.scrollIntoView({behavior:'smooth', block:'center'}); }
          return;
        }
        // RÃ¨gles mÃ©tier
        var right=form.querySelector('[name="side_right"]').checked;
        var left =form.querySelector('[name="side_left"]').checked;
        if(!right && !left){ e.preventDefault(); alert('SÃ©lectionnez au moins un cÃ´tÃ© (Droit/Gauche). / Select at least one side.'); return; }

        var elT=form.querySelector('input[name="the_throne"]:checked');
        var elB=form.querySelector('input[name="boston_showdown"]:checked');
        var elM=form.querySelector('input[name="montreal_meltdown"]:checked');
        var throne=elT?elT.value:'TBD', boston=elB?elB.value:'TBD', meltdown=elM?elM.value:'TBD';
        if(throne==='Yes' && !(boston==='Yes' || meltdown==='Yes')){ e.preventDefault(); alert("The Throne : cochez 'Oui' Ã  Boston OU Meltdown."); return; }

        var conf=parseInt(document.getElementById('confidence_pct').value,10);
        if(isNaN(conf) || conf<80){ e.preventDefault(); alert('Confiance â‰¥ 80 % / Confidence â‰¥ 80%.'); return; }

        // OK -> laisser POST vers l'iframe
        submitted=true;
        btn.disabled=true; btn.innerText='Envoiâ€¦ / Submittingâ€¦';

        // garde-fou: si l'iframe ne dÃ©clenche pas load (bloqueur), on propose le fallback
        setTimeout(function(){
          if(submitted && !fallbackTriggered){
            fallbackTriggered = true;
            showFallbackModal();
            btn.disabled = false;
            btn.innerText = 'Soumettre / Submit';
          }
        }, 5000);
      });
    })();
  </script>
</body>
</html>
